name: telgraf-prom

prefix: ""
topology:
  defaults:
    kind: nokia_srlinux
  kinds:
    nokia_srlinux:
      image: ghcr.io/nokia/srlinux:25.7.1
  nodes:
    leaf1:
      type: ixr-d5
    leaf2:
      type: ixr-d5
    prometheus:
      kind: linux
      image: quay.io/prometheus/prometheus:v2.54.1
      binds:
        - prometheus.yml:/etc/prometheus/prometheus.yml:ro
      cmd: --config.file=/etc/prometheus/prometheus.yml
      ports:
        - 9090:9090
    telegraf2:
      kind: linux
      image: telegraf:latest
      binds:
        - telegraf.conf:/etc/telegraf/telegraf.conf:ro
      ports:
        - 9273:9273
  links:
    - endpoints: ["leaf1:e1-1","leaf2:e1-1"]
    - endpoints: ["leaf1:e1-2-2","leaf2:e1-2-2"]
    - endpoints: ["leaf1:e1-3-4","leaf2:e1-3-4"]
